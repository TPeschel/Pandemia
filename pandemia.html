<!DOCTYPE = HTML>
<html>
	<head>
		<title>
			PANDEMIC DISEASE SIMULATIONS
		</title>
		<script src="v2.js" type="text/javascript"></script>
		<script src="rng.js" type="text/javascript"></script>
		<script src="iterasures.js" type="text/javascript"></script>
		<script src="display.js" type="text/javascript"></script>
		<script src="histogram.js" type="text/javascript"></script>
		<script src="pandemia.js" type="text/javascript"></script>
		<link rel="stylesheet" type="text/css" href="pandemia.css">
	</head>
	<body>
		<p>
		  PANDEMIC DISEASE SIMULATIONS
		</p>
		<div>
			<p>Keine Beschränkungen</p>
	    	<canvas class = "cnvs", id="cnvs1">
				no html 5 supported
			</canvas>
		</div>
		<div>
			<div>
				<p>Keine Beschränkungen</p>
				<p id="info1"></p>
			</div>
	    	<canvas class = "hist", id="histo1">
				no html 5 supported
			</canvas>
		</div>
		<div>
			<p>Social Distancing - wird durch höhere Abstossung simuliert</p>
	    	<canvas class = "cnvs", id="cnvs2">
				no html 5 supported
			</canvas>
		</div>
		<div>
			<div>
				<p>Social Distancing - wird durch höhere Abstossung simuliert</p>
				<p id="info2"></p>
			</div>
	    	<canvas class = "hist", id="histo2">
				no html 5 supported
			</canvas>
		</div>
		<div>
			<p>Ausgangssperre - wird durch Waende simuliert</p>
	    	<canvas class = "cnvs", id="cnvs3">
				no html 5 supported
			</canvas>
		</div>
		<div>
			<div>
				<p>Ausgangssperre - wird durch Waende simuliert</p>
				<p id="info3"></p>
			</div>
	    	<canvas class = "hist", id="histo3">
				no html 5 supported
			</canvas>
		</div>
		<div>
			<p>Social Distancing und Ausgangsperre</p>
	    	<canvas class = "cnvs", id="cnvs4">
				no html 5 supported
			</canvas>
		</div>
		<div>
			<div>
				<p>Social Distancing und Ausgangsperre</p>
				<p id="info4"></p>
			</div>
	    	<canvas class = "hist", id="histo4">
				no html 5 supported
			</canvas>
		</div>
		<script type="text/javascript">
		
			let
			colors = { 
				healthy : "#d0d0d0",
				sick : {
					treated : "#2040ff",
					untreated : "#ff4020"
				},
				recovered : {
					treated : "#80a0ff",
					untreated : "#ff9080"
				},
				dead : {
					treated : "#00007f",
					untreated : "#7f0000"
				}
			},

			walls = [ new Wall( .97, .1, 1.03, .9 ), new Wall( .47, .1, .53, .9 ), new Wall( 1.47, .1, 1.53, .9 ) ],//, new Wall( .1, .47, 1.9, .53 ) ],

			pans = [
				new Pandemia( "cnvs1", count_of_humans_x = 20, count_of_humans_y = 10, radius = .013, velocity = .005, acceleration = 1.e-8, sicktime = 250, seed = 54, addwalls = [ ], colors = colors ),
				new Pandemia( "cnvs2", count_of_humans_x = 20, count_of_humans_y = 10, radius = .013, velocity = .005, acceleration = 1.e-6, sicktime = 250, seed = 55, addwalls = [ ], colors = colors ),
				new Pandemia( "cnvs3", count_of_humans_x = 20, count_of_humans_y = 10, radius = .013, velocity = .005, acceleration = 1.e-8, sicktime = 250, seed = 54, addwalls = walls, colors = colors ),
				new Pandemia( "cnvs4", count_of_humans_x = 20, count_of_humans_y = 10, radius = .013, velocity = .005, acceleration = 1.e-6, sicktime = 250, seed = 54, addwalls = walls, colors = colors )
			],

			hist = [ 
				new Histogram( "histo1", 1500, pans[ 0 ].hmn.length, colors ),
				new Histogram( "histo2", 1500, pans[ 1 ].hmn.length, colors ),
				new Histogram( "histo3", 1500, pans[ 2 ].hmn.length, colors ),
				new Histogram( "histo4", 1500, pans[ 3 ].hmn.length, colors )
			],

			updt = [ ];

			for( let i = 0; i < pans.length; ++ i ) {

				updt.push( 
					function( ) {

						if( ! pans[ i ].finished( ) ) {

							requestAnimationFrame ( updt[ i ] );

							pans[ i ].do( );

							if( pans[ i ].time_cnt & 0x3 == 0x3 ) {
							
								hist[ i ].add( pans[ i ].states );
							
								hist[ i ].plot( );
							}
							
							document.getElementById( "info" + ( i + 1 ) ).innerHTML = 
							"Total: " + pans[ i ].hmn.length + 
							"<br>Gesunde: " + pans[ i ].states.healthy +
							"<br>Infizierte innerhalb des Gesundheitswesens: " + pans[ i ].states.sick.treated +
							"<br>Infizierte ausserhalb des Gesundheitswesens: " + pans[ i ].states.sick.untreated +
							"<br>Geheilte innerhalb des Gesundheitswesens: " + pans[ i ].states.recovered.treated +
							"<br>Geheilte ausserhalb des Gesundheitswesens: " + pans[ i ].states.recovered.untreated +
							"<br>Tote innerhalb des Gesundheitswesens: " + pans[ i ].states.dead.treated +
							"<br>Tote ausserhalb des Gesundheitswesens: " + pans[ i ].states.dead.untreated;							
						}
					}
				)
			}

			for( let i = 0; i < pans.length; ++ i ) {

				updt[ i ]( );
			}

    	</script>
	</body>
</html>
