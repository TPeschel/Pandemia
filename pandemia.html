<!DOCTYPE = HTML>
<html>
	<head>
		<title>
			PANDEMIC DISEASE SIMULATIONS
		</title>
		<script src="v2.js" type="text/javascript"></script>
		<script src="rng.js" type="text/javascript"></script>
		<script src="iterasures.js" type="text/javascript"></script>
		<script src="display.js" type="text/javascript"></script>
		<script src="histogram.js" type="text/javascript"></script>
		<script src="pandemia.js" type="text/javascript"></script>
		<link rel="stylesheet" type="text/css" href="pandemia.css">
	</head>
	<body>
		<p>
		  PANDEMIC DISEASE SIMULATIONS
		</p>
		<div>
	    	<canvas class = "cnvs", id="cnvs1">
				no html 5 supported
			</canvas>
		</div>
		<div>
	    	<canvas class = "hist", id="histo1">
				no html 5 supported
			</canvas>
		</div>
		<div>
	    	<canvas class = "cnvs", id="cnvs2">
				no html 5 supported
			</canvas>
		</div>
		<div>
	    	<canvas class = "hist", id="histo2">
				no html 5 supported
			</canvas>
		</div>
		<div>
	    	<canvas class = "cnvs", id="cnvs3">
				no html 5 supported
			</canvas>
		</div>
		<div>
	    	<canvas class = "hist", id="histo3">
				no html 5 supported
			</canvas>
		</div>
		<div>
	    	<canvas class = "cnvs", id="cnvs4">
				no html 5 supported
			</canvas>
		</div>
		<div>
	    	<canvas class = "hist", id="histo4">
				no html 5 supported
			</canvas>
		</div>
		<script type="text/javascript">
		
		let
			add_walls = [ new Wall( .975, .1, 1.025, .9 ), new Wall( .475, .1, .525, .9 ), new Wall( 1.475, .1, 1.525, .9 ), new Wall( .1, .475, 1.9, .525 ) ];

			pans = [
				new Pandemia( "cnvs1", count_of_humans_x = 20, count_of_humans_y = 10, radius = .015, velocity = .005, acceleration = 4.e-8, sicktime = 500, seed = 23, add_walls = add_walls ),
				new Pandemia( "cnvs2", count_of_humans_x = 20, count_of_humans_y = 10, radius = .015, velocity = .005, acceleration = 3.e-8, sicktime = 500, seed = 23 ),
				new Pandemia( "cnvs3", count_of_humans_x = 20, count_of_humans_y = 10, radius = .015, velocity = .003, acceleration = 2.e-8, sicktime = 500, seed = 23, add_walls = add_walls ),
				new Pandemia( "cnvs4", count_of_humans_x = 20, count_of_humans_y = 10, radius = .015, velocity = .003, acceleration = 1.e-8, sicktime = 500, seed = 23 ) 
			],

			hist = [ 
				new Histogram( "histo1", 2000, pans[ 0 ].hmn.length ),
				new Histogram( "histo2", 2000, pans[ 1 ].hmn.length ),
				new Histogram( "histo3", 2000, pans[ 2 ].hmn.length ),
				new Histogram( "histo4", 2000, pans[ 3 ].hmn.length )
			],

			updt = [ ];

			for( let i = 0; i < pans.length; ++ i ) {

				updt.push( 
					function( ) {

						if( ! pans[ i ].finished( ) ) {

							requestAnimationFrame ( updt[ i ] );

							pans[ i ].do( );

							//if( pans[ i ].time_cnt & 0x7 == 0x7 ) {

								hist[ i ].add( pans[ i ].time_cnt, pans[ i ].states );
								
								hist[ i ].plot( );
							//}
						}
					}
				)
			}

			for( let i = 0; i < pans.length; ++ i ) {

				updt[ i ]( );
			}

    	</script>
	</body>
</html>
